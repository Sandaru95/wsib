<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ video_object.title }} | WhoSangItBetter</title>
    {% load static %}
    <!-- The Favicon -->
    <link rel="shortcut icon" type="image" href="{% static 'detail/images/favicon.png' %}" sizes="64x64"/>
    <!-- The Font Awesome Library -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- The Custom CSS -->
    <link rel="stylesheet" href="{% static 'detail/css/detail.css' %}">
</head>
<body onload="checkIfUserHasVoted();">
    <!-- ============================     Top Bar Search Section ====================== -->
    <section id="top-bar-search">
        <!-- Topic Image -->
        <div id="top-bar-search-topic" onclick="navigateToHome();">
            <img src="{% static 'detail/images/favicon.png' %}">
            <h3 id="topic-top-bar">WhoSangItBetter</h3>
        </div>

        <!-- Search -->
        <input type="text" placeholder="Search for WSIB Songs" onfocus="colorBorder(this);" onblur="uncolorBorder(this);">
        <button id="top-bar-search-btn"><span class="fa fa-search"></span></button>

        <!-- Loving Links -->
        <a href="#" class="top-bar-loving-link"><span class="fa fa-music"></span></a>
        <a href="#" class="top-bar-loving-link"><span class="fa fa-user"></span></a>
    </section>
    <!-- ============================     END : END: END: END: END ====================== -->
    <!-- ================================================================================ -->
    <!-- ==============================     One Video Section =========================== -->
    <section id="one-video-section">
        {% if video_object.video_source %}
        <video id="one-video-section-video" controls autoplay>
            <source src="{{ video_object.video_source.url }}">
        </video>
        {% else %}
        <div id="one-video-section-video" >
            {{ video_object.youtube_embed_text|safe }}
        </div>
        {% endif %}
        <h3 id="one-video-section-winner-h3">Winner</h3>
        <a href="#" id="one-video-section-winner-a">{{ video_object.winning_nation.flag_emoji }}</a>
        <p class="one-video-section-p">Title: {{ video_object.title }}</a>
        <p class="one-video-section-p">{{ video_object.no_youtube_views }} YouTube Views</a>
        <p class="one-video-section-p">{{ video_object.no_votes }} Votes</a>
    </section>
    <!-- ============================     END : END: END: END: END ====================== -->
    <!-- ================================================================================ -->
    <!-- ===============================     Vote For Section =========================== -->
    <section id="vote-for-section">
        <div id="vote-for-nations">
            {% for nation in video_object.nations.all %}
            <a href="#" class="select-nation" id="select-nation-{{ forloop.counter }}" onclick="selectNation{{ forloop.counter }}(this, '{{nation.pro_name}}')">{{ nation.flag_emoji }}</a>
            {% endfor %}
        </div>
        <input type="hidden" id="nation-voted-pro-name">
        {% csrf_token %}
        <button id="vote-btn" onclick="voteSubmission();">Vote Now</button>
    </section>
    <!-- ============================     END : END: END: END: END ====================== -->
    <!-- ================================================================================ -->
    <!-- ==============================     The Chart Section =========================== -->
    <section id="chart-section">
        <h3>People's Opinion</h3>
        <div id="chart-section-pie">
            <canvas id="myPie" width="400" height="400"></canvas>
        </div>
        <div id="chart-section-bar">
            <canvas id="myBar" width="400" height="400"></canvas>
        </div>
        <div id="chart-section-polar">
            <canvas id="myPolar" width="400" height="400"></canvas>
        </div>
    </section>
    <!-- ============================     END : END: END: END: END ====================== -->
    <!-- ================================================================================ -->
    <!-- =============================  The Comments Section ============================ -->
    <!-- <section id="comments">
        <h3>Comments 1204,</h3>
    </section> -->
    <!-- ============================     END : END: END: END: END ====================== -->
    <!-- ================================================================================ -->
    <!-- The Chart JS library -->
    <script src="{% static 'detail/js/chart.js' %}"></script>
    <!-- Jquery -->
    <script src="{% static 'detail/js/jquery.js' %}"></script>
    <!-- Sweet alert 2 js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <!-- Custom Javascript variables need data from database -->
    <script>
        let videoPk = {{ video_object.pk }};
        let chartDataSet = {{video_object.vote_statement | safe }};
    </script>
    <!-- The Custom Javascript File -->
    <script src="{% static 'detail/js/detail.js' %}"></script>
</body>
</html>